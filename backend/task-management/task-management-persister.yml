serviceMaps:
  serviceName: task-management-service
  mappings:
    - version: 1.0
      description: Persists task management details in tables
      fromTopic: save-task-management
      isTransaction: true
      isAuditEnabled: true
      module: TASK-MANAGEMENT
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      transactionCodeJsonPath: $.filingNumber
      queryMaps:
        - query: INSERT INTO dristi_task_management(id,tenant_id,task_management_number,filing_number,task_type,status,court_id,order_number,party_details,additional_details,created_by,last_modified_by,created_time,last_modified_time) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: taskManagement
          jsonMaps:
            - jsonPath: $.taskManagement.id
            - jsonPath: $.taskManagement.tenantId
            - jsonPath: $.taskManagement.taskManagementNumber
            - jsonPath: $.taskManagement.filingNumber
            - jsonPath: $.taskManagement.taskType
            - jsonPath: $.taskManagement.status
            - jsonPath: $.taskManagement.courtId
            - jsonPath: $.taskManagement.orderNumber
            - jsonPath: $.taskManagement.partyDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.taskManagement.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.taskManagement.auditDetails.createdBy
            - jsonPath: $.taskManagement.auditDetails.lastModifiedBy
            - jsonPath: $.taskManagement.auditDetails.createdTime
            - jsonPath: $.taskManagement.auditDetails.lastModifiedTime

    - version: 1.0
      description: Update task management details in tables
      fromTopic: update-task-management
      isTransaction: true
      isAuditEnabled: true
      module: TASK-MANAGEMENT
      objectIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      transactionCodeJsonPath: $.filingNumber
      queryMaps:
        - query: UPDATE dristi_task_management SET filing_number=?, status=?, court_id=?, order_number=?, party_details=?, additional_details=?, lastmodifiedby=?, lastmodifiedtime=? WHERE id=?;
          basePath: taskManagement
          jsonMaps:
            - jsonPath: $.taskManagement.filingNumber
            - jsonPath: $.taskManagement.status
            - jsonPath: $.taskManagement.courtId
            - jsonPath: $.taskManagement.orderNumber
            - jsonPath: $.taskManagement.partyDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.taskManagement.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.taskManagement.auditDetails.lastModifiedBy
            - jsonPath: $.taskManagement.auditDetails.lastModifiedTime
            - jsonPath: $.taskManagement.id